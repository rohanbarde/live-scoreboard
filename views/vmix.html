<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0b1320">
    <title>JUDO BHARAT â€” vMix Scorecard</title>
    
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/public/css/vmix.css" rel="stylesheet">
    <link rel="icon" href="../public/assets/judoicon.png" type="image/png">


    <!-- Additional styles for SHIDO cards -->
    <style>
        /* SHIDO Card Styles for vMix */
        .shido-cards {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 4vw;
            gap: 0.3vw;
            height: 4vw; /* Fixed height to match score numbers */
        }

        .vmix-card-pill {
            display: inline-flex;
            width: 1.8vw;
            height: 2.5vw;
            border-radius: 0.3vw;
            margin: 0.05vw;
            font-weight: 900;
            font-size: 1vw;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0.2vw 0.4vw rgba(0, 0, 0, 0.6);
            border: 0.1vw solid rgba(0, 0, 0, 0.9);
        }

        .vmix-card-pill.yellow {
            background: linear-gradient(180deg, #b8860b, #8b6914);
            color: #fff;
            border-color: rgba(0, 0, 0, 0.9);
            text-shadow: 0 0.1vw 0.2vw rgba(0, 0, 0, 0.7);
        }

        .vmix-card-pill.red {
            background: linear-gradient(180deg, #8b0000, #5a0000);
            color: #fff;
            border-color: rgba(0, 0, 0, 0.9);
            text-shadow: 0 0.1vw 0.2vw rgba(0, 0, 0, 0.7);
        }

        /* Enhanced alignment for score grid */
        .score-grid {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 3vw !important;
            margin: 0.3vw 0 0.5vw !important;
            white-space: nowrap !important;
            width: 100% !important;
            padding: 0 1vw !important;
        }

        .score-cell {
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            min-width: 5vw !important;
            height: 4vw !important; /* Fixed height for all cells */
        }

        .score-num {
            font-size: 7.5vw !important;
            font-weight: 900 !important;
            line-height: 1 !important;
            margin: 0 !important;
            padding: 0 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* Hold Timer Styles for vMix */
        .hold-timer-display {
            background: rgba(255, 215, 0, 0.15);
            border: 0.15vw solid #ffd700;
            border-radius: 0.8vw;
            padding: 0.5vw 1vw;
            text-align: center;
            min-width: 6vw;
            margin-left: 1.5vw;
        }

        .hold-timer-label {
            font-size: 1vw;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 0.1vw;
            text-shadow: 0 0.1vw 0.3vw rgba(0, 0, 0, 0.8);
        }

        .hold-timer-time {
            font-size: 2.5vw;
            font-weight: 900;
            color: #ffd700;
            line-height: 1;
            text-shadow: 0 0.2vw 0.5vw rgba(0, 0, 0, 0.8);
        }

        .hold-timer-player {
            font-size: 0.8vw;
            font-weight: 600;
            color: #fff;
            margin-top: 0.1vw;
            opacity: 0.9;
            text-shadow: 0 0.1vw 0.2vw rgba(0, 0, 0, 0.8);
        }

        /* Color states for hold timer */
        .hold-timer-display.warning .hold-timer-time {
            color: #ff6600;
            border-color: #ff6600;
        }

        .hold-timer-display.critical .hold-timer-time {
            color: #ff0000;
            border-color: #ff0000;
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.7; }
        }

        /* Player Photo Styles */
        .player-photo {
            width: 6vw;
            height: 6vw;
            border-radius: 0.6vw;
            object-fit: cover;
            box-shadow: 0 0.2vw 0.8vw rgba(0, 0, 0, 0.5);
            background: #f0f0f0;
            padding: 0.3vw;
        }
        
        .fighter-top-row {
            position: relative;
            padding: 3.5vw 1vw 0.5vw 1vw;
            margin-bottom: 0.5vw;
        }
        
        .flag-team-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.2vw;
        }
        
        .fighter-club {
            font-size: 1.3vw !important;
            font-weight: 600 !important;
            margin-top: 0.2vw !important;
        }
        
        .fighter-name {
            font-size: 4.5vw !important;
            font-weight: 900 !important;
            margin: 0 !important;
            padding: 0.3vw 0 !important;
            position: absolute;
            left: 50%;
            top: 0.5vw;
            transform: translateX(-50%);
            white-space: nowrap;
            z-index: 5;
        }

        /* Additional timer alignment fixes */
        .bottom-bar {
            position: relative !important;
            width: 100% !important;
            height: auto !important;
            min-height: 6vw !important;
            padding: 0.5vw 2vw !important;
        }

        .timer-container {
            position: absolute !important;
            left: 50% !important;
            top: 50% !important;
            transform: translate(-50%, -50%) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 2vw !important;
            z-index: 10 !important;
        }

        .timer-display {
            margin: 0 !important;
            padding: 0 !important;
            font-size: 5vw !important;
        }

        .right-side-container {
            display: flex !important;
            align-items: center !important;
            justify-content: flex-end !important;
            flex: 0 0 15vw !important;
            padding-right: 1vw !important;
        }

        .right-side-container .hold-timer-display {
            margin-left: 0 !important;
            margin-right: 0 !important;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 900px) {
            .vmix-card-pill {
                width: 3vw;
                height: 4vw;
                font-size: 1.5vw;
            }
            
            .shido-cards {
                height: 5vw !important;
            }

            .hold-timer-display {
                min-width: 6vw;
                padding: 0.6vw 1vw;
                margin-left: 1.5vw;
            }

            .hold-timer-label {
                font-size: 1vw;
            }

            .hold-timer-time {
                font-size: 2.5vw;
            }

            .hold-timer-player {
                font-size: 0.8vw;
            }
        }
    </style>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>

<body class="vmix-scorecard">
<div class="container-fluid d-flex flex-column h-100 p-0">
    <!-- Player 1 (Top) -->
    <div class="fighter-box fighter-left flex-grow-1 d-flex flex-column justify-content-between">
        <div class="fighter-top-row d-flex w-100 justify-content-between align-items-start">
            <!-- Player Name (Top Center) -->
            <div class="fighter-name text-center" id="fighterAName">Fighter A</div>
            <!-- Flag and Team Name (Left) -->
            <div class="flag-team-container">
                <img src="https://flagcdn.com/16x12/in.png" alt="Flag A" class="fighter-flag" id="flagA" />
                <div class="fighter-club" id="fighterAClub">Team A</div>
            </div>
            <!-- Player Photo (Right) -->
            <img id="photoA" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 24 24' fill='none' stroke='%23999' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'%3E%3C/path%3E%3Ccircle cx='12' cy='7' r='4'%3E%3C/circle%3E%3C/svg%3E" alt="Player A" class="player-photo">
        </div>
        <div class="score-grid">
            <div class="score-cell">
                <div id="ipponA" class="score-num">0</div>
            </div>
            <div class="score-cell">
                <div id="wazaA" class="score-num">0</div>
            </div>
            <div class="score-cell">
                <div id="yukoA" class="score-num">0</div>
            </div>
            <div class="score-cell">
                <div id="shidoA" class="shido-cards">
                    <div id="shidoCardsA"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player 2 (Bottom) -->
    <div class="fighter-box fighter-right flex-grow-1 d-flex flex-column justify-content-between">
        <div class="fighter-top-row d-flex w-100 justify-content-between align-items-start">
            <!-- Player Name (Top Center) -->
            <div class="fighter-name text-center" id="fighterBName">Fighter B</div>
            <!-- Flag and Team Name (Left) -->
            <div class="flag-team-container">
                <img src="https://flagcdn.com/16x12/jp.png" alt="Flag B" class="fighter-flag" id="flagB" />
                <div class="fighter-club" id="fighterBClub">Team B</div>
            </div>
            <!-- Player Photo (Right) -->
            <img id="photoB" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 24 24' fill='none' stroke='%23999' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'%3E%3C/path%3E%3Ccircle cx='12' cy='7' r='4'%3E%3C/circle%3E%3C/svg%3E" alt="Player B" class="player-photo">
        </div>
        <div class="score-grid">
            <div class="score-cell">
                <div id="ipponB" class="score-num">0</div>
            </div>
            <div class="score-cell">
                <div id="wazaB" class="score-num">0</div>
            </div>
            <div class="score-cell">
                <div id="yukoB" class="score-num">0</div>
            </div>
            <div class="score-cell">
                <div id="shidoB" class="shido-cards">
                    <div id="shidoCardsB"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Bar with Timer and Match Info -->
    <div class="bottom-bar d-flex justify-content-between align-items-center px-4 py-2" style="background: rgba(0,0,0,0.7);">
        <div class="match-info text-start" >
            <div class="match-number" id="matchInfo">Match 1</div>
            <div class="weight-category" id="weightCategory">-60kg</div>
        </div>

        <div class="timer-container">
            <div class="timer-display" id="timerDisplay">04:00</div>
        </div>

        <!-- Hold Timer on right side -->
        <div class="right-side-container">
            <div class="hold-timer-display" id="holdTimerDisplay" style="display:none;">
                <div class="hold-timer-label">HOLD</div>
                <div class="hold-timer-time" id="holdTimerTime">20</div>
                <div class="hold-timer-player" id="holdTimerPlayer">White</div>
            </div>
        </div>
    </div>

</div>

    <!-- Scripts -->
    <!-- Firebase SDK (using CDN) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>


    <!-- Application Script -->
    <script src="/public/js/vmix.js"></script>
    
    <!-- Enhanced SHIDO Card Support -->
    <script src="/public/js/vmix-match-specific.js"></script>

    <!-- Auto-refresh the page every 30 minutes to prevent any potential memory leaks -->
    <script>
    setInterval(() => {
        console.log('Auto-refreshing page...');
        window.location.reload();
    }, 30 * 60 * 1000);

    </script>
</body>
</html>
