<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0b1320">
    <title>JUDO BHARAT â€” vMix Scorecard</title>
    
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/public/css/vmix.css" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>

<body class="vmix-scorecard">
<div class="container-fluid d-flex flex-column h-100 p-0">
    <!-- Player 1 (Top) -->
    <div class="fighter-box fighter-left flex-grow-1 d-flex flex-column justify-content-between">
        <div class="fighter-top-row d-flex w-100 justify-content-between align-items-start">
            <img src="https://flagcdn.com/16x12/in.png" alt="Flag A" class="fighter-flag" id="flagA" />
            <div class="fighter-club" id="fighterAClub">Team A</div>
        </div>
        <div class="fighter-name text-center" id="fighterAName">Fighter A</div>
        <div class="fighter-score text-center" id="scoreA">0</div>
    </div>

    <!-- Player 2 (Bottom) -->
    <div class="fighter-box fighter-right flex-grow-1 d-flex flex-column justify-content-between">
        <div class="fighter-top-row d-flex w-100 justify-content-between align-items-start">
            <img src="https://flagcdn.com/16x12/jp.png" alt="Flag B" class="fighter-flag" id="flagB" />
            <div class="fighter-club" id="fighterBClub">Team B</div>
        </div>
        <div class="fighter-name text-center" id="fighterBName">Fighter B</div>
        <div class="fighter-score text-center" id="scoreB">0</div>
    </div>

    <!-- Bottom Bar with Timer and Match Info -->
    <div class="bottom-bar">
        <div class="match-info">
            <div class="match-number" id="matchInfo">Match 1</div>
            <div class="weight-category" id="weightCategory">-60kg</div>
        </div>
        <div class="timer-display" id="timerDisplay">04:00</div>
    </div>
</div>

    <!-- Scripts -->
    <!-- Firebase SDK (using CDN) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Debug Info -->
    <div id="debug-info" style="position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; z-index: 1000;">
        <div>Status: <span id="connection-status">Connecting...</span></div>
        <div>Last Update: <span id="last-update">Never</span></div>
    </div>

    <!-- Application Script -->
    <script src="/public/js/vmix.js"></script>
    
    <!-- Auto-refresh the page every 30 minutes to prevent any potential memory leaks -->
    <script>
    setInterval(() => {
        console.log('Auto-refreshing page...');
        window.location.reload();
    }, 30 * 60 * 1000);
    
    // Update debug info
    function updateDebugInfo(status) {
        document.getElementById('connection-status').textContent = status;
        document.getElementById('last-update').textContent = new Date().toLocaleTimeString();
    }
    
    // Make it available globally for vmix.js
    window.updateDebugInfo = updateDebugInfo;
    </script>
</body>
</html>
